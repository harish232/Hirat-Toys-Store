<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Toy Store â€” Login</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />

 
  <link rel="stylesheet" href="../boostrap/bootstrap-5.3.7-dist/css/bootstrap.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">

  <style>
    body {
      font-family: 'Times New Roman', Times, serif;
      max-width: 420px;
      margin: 20px auto;
      padding: 0 16px;
      background-image: url(../IMG/pexels-kovyrina-12211.jpg);
      background-repeat: no-repeat;
      background-size: cover;
    }

    h1 {
      text-align: center;
      color: rgb(196, 12, 12);
    }

    
    .box {
      margin-top: 90px;
     margin-right: 200px;
      padding: 18px;
      border-radius: 8px;
      color: black;
      border: 1px solid rgba(0,0,0,0.12);
      background-color: rgba(255, 255, 255, 0.95);
      width: 100%;
      max-width: 360px;
      box-sizing: border-box;
    }

    .box:hover {
      box-shadow: 10px rgba(9, 9, 9, 0.15);
      border: 1px solid rgba(18, 16, 16, 0.18);
      
    }

    label {
      display: block;
      margin-top: 8px;
      font-weight: 600;
    }

    .input-full {
      display: block;
      width: 100%;
      padding: 10px 12px;
      margin: 8px 0 6px 0;
      box-sizing: border-box;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    .password-wrapper {
      position: relative;
     
    }

    
    .toggle-visibility {
      position: absolute;
      right: 10px; 
      top: 50%;
      transform: translateY(-50%);
      background: transparent;
      border: none;
      padding: 4px;
      cursor: pointer;
      font-size: 18px;
      color: #333;
      margin-left: 100px;
    }

    .toggle-visibility:focus {
      outline: none;
      box-shadow: none;
    }

    .forgot-link {
      position: absolute;
      margin-top: 30px;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 13px;
      background: transparent;
      border: none;
      color: blue;
      cursor: pointer;
      padding: 0;
      text-decoration: underline;
    }

   
    .id {
      margin-top: 12px;
    }

    .note {
      font-size: 13px;
      margin-top: 8px;
    }
    
  </style>
</head>

<body>
  <div>
    
  </div>

  <div id="loginBox" class="box" role="region" aria-labelledby="loginTitle">
    <h1>Hirat ToyStore</h1>
    <h2 id="loginTitle" style="text-align:center; margin-bottom:6px;">Log In</h2>

    <label for="loginEmail" class="user">UserName</label>
    <input id="loginEmail" class="input-full" placeholder="Email or Phone number" type="text" inputmode="email" autocomplete="username" />

    <label for="password" class="user">Password</label>

    
  

    <div class="password-wrapper">
       
      <input id="password" class="input-full" type="password" placeholder="Password" autocomplete="current-password" />
      
      <button id="togglePassword" class="toggle-visibility" type="button" aria-label="Show password">
        <i id="toggleIcon" class="bi bi-eye-slash-fill" aria-hidden="true"></i>
      </button>
    

       <div class="forgot" ><button id="forgotBtn" class="forgot-link" type="button" aria-label="Forgot password">Forgot Password</button></div>
    </div>
    
    <div class="note">
         
      <span>If you are a new customer: </span><a href="../HTML/sign.html">Registration</a>
    </div>

    <div class="id">
      <button id="loginBtn" type="button" class="btn btn-success w-100">Log In</button>
    </div>
  </div>


  <script>
    
    function isValidEmailOrPhone(value) {
      if (!value) return false;
      value = value.trim();
     
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      const phoneRegex = /^\d{10}$/; 
      return emailRegex.test(value) || phoneRegex.test(value);
    }

   
    function isValidPassword(pw) {
      if (!pw) return false;
      return pw.length >= 6;
    }

    const loginBtn = document.getElementById('loginBtn');
    const loginEmail = document.getElementById('loginEmail');
    const password = document.getElementById('password');
    const togglePassword = document.getElementById('togglePassword');
    const toggleIcon = document.getElementById('toggleIcon');
    const forgotBtn = document.getElementById('forgotBtn');

   
    togglePassword.addEventListener('click', function () {
      const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
      password.setAttribute('type', type);
     
      if (type === 'text') {
        toggleIcon.className = 'bi bi-eye-fill';
        togglePassword.setAttribute('aria-label', 'Hide password');
      } else {
        toggleIcon.className = 'bi bi-eye-slash-fill';
        togglePassword.setAttribute('aria-label', 'Show password');
      }
    });

    
    [loginEmail, password].forEach(el => {
      el.addEventListener('keyup', function (e) {
        if (e.key === 'Enter') {
          attemptLogin();
        }
      });
    });

    loginBtn.addEventListener('click', attemptLogin);

    function attemptLogin() {
      const emailOrPhone = loginEmail.value.trim();
      const pwd = password.value;

      
      if (!isValidEmailOrPhone(emailOrPhone)) {
        alert('Enter a valid email (like user@example.com) or a 10-digit phone number.');
        loginEmail.focus();
        return;
      }

      if (!isValidPassword(pwd)) {
        alert('Password must be at least 6 characters.');
        password.focus();
        return;
      }

      
      window.location.href = "../HTML/interface.html";
    }

   
    forgotBtn.addEventListener('click', function () {
     
      const prefill = loginEmail.value.trim();
      const input = prompt('Enter your registered email or 10-digit phone number to reset password:', prefill);
      if (input === null) return; 

      const trimmed = input.trim();
      if (!isValidEmailOrPhone(trimmed)) {
        alert('Please enter a valid email (user@example.com) or a 10-digit phone number.');
        return;
      }

     
      if (/^\d{10}$/.test(trimmed)) {
        alert('If this phone number is registered, an OTP has been sent to ' + trimmed + '. (Demo)');
      } else {
        alert('If this email is registered, a password reset link has been sent to ' + trimmed + '. (Demo)');
      }
    });
  </script>
  
</body>

</html>
